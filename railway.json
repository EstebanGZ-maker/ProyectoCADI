{
    "$schema": "https://railway.app/railway.schema.json",
    "build": {
      "builder": "NIXPACKS",
      "env": {
        "FRONTEND_PATH": "front-end",
        "BACKEND_PATH": "src"
      },
      "scripts": {
        "install": "npm install",  
        "build": "npm run build --prefix front-end && npm run build --prefix src"  
      }
    },
    "deploy": {
      "runtime": "V2",
      "numReplicas": 1,
      "sleepApplication": false,
      "restartPolicyType": "ON_FAILURE",
      "restartPolicyMaxRetries": 10
    },
    "services": [
      {
        "name": "frontend",
        "type": "static",
        "path": "front-end/dist",
        "buildCommand": "npm run build --prefix front-end",  
        "startCommand": "npm run preview --prefix front-end"  
      },
      {
        "name": "backend",
        "type": "node",
        "path": "src",  
        "buildCommand": "npm install --prefix src",  
        "startCommand": "npm start --prefix src"  
      }
    ]
  }
  